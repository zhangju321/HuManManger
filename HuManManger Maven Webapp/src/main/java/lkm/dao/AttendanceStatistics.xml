<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="lkm.dao.AttendanceStatistics" >

      <!-- //外出 -->
      <resultMap id="out" type="lkm.entity.hr_go_out" >
        <id column="out_id" property="outId" jdbcType="INTEGER" />
        <result column="STAFF_ID" property="staffId" jdbcType="INTEGER" />
        <result column="reason" property="reason" jdbcType="VARCHAR" />
        <result column="out_time" property="outTime" jdbcType="TIMESTAMP" />
        <result column="start_time" property="startTime" jdbcType="TIMESTAMP" />
        <result column="end_time" property="endTime" jdbcType="TIMESTAMP" />
        <result column="place" property="place" jdbcType="VARCHAR" />
        <result column="examine_Person" property="examinePerson" jdbcType="VARCHAR" />
        <result column="circulate" property="circulate" jdbcType="VARCHAR" />
        <result column="status_name" property="statusName" jdbcType="VARCHAR" />
        <result column="operate" property="operate" jdbcType="VARCHAR" />
  </resultMap>
    
    
    <select id="selectout" resultMap="out" parameterType="lkm.entity.hr_go_out">
        select * from hr_go_out where staff_id=#{staffId}
    </select>
    
    
    
    
    
    
    

  	<!-- 查询离职表 -->
	<select id="selectas" resultType="map">
		 select i.staff_id,i.STAFF_NAME,COUNT(t.travel_id) ct,count(v.vocation_id) cv,count(r.work_id) cr,count(o.out_id) co,
		 t.*,v.*,r.*,o.*
         from staff_info i 
         left JOIN travel t on i.staff_id=t.STAFF_ID
         left join vocation v on i.staff_id=v.STAFF_ID
         left join work_register r on i.staff_id=r.staff_id
         left join hr_go_out o on i.staff_id=o.STAFF_ID
         group by i.staff_id,i.staff_name 
         order by i.staff_id asc
	</select>
</mapper>